<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Kids English Quiz Â· Embed</title>
  <style>
    :root{ --bg:#0f172a; --card:#111827; --text:#e5e7eb; --muted:#94a3b8; --primary:#22c55e; --danger:#ef4444; --accent:#38bdf8; }
    *{box-sizing:border-box}
    body{margin:0;background:#0b1220;color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Apple SD Gothic Neo,Noto Sans KR,sans-serif;}
    .wrap{padding:12px env(safe-area-inset-right) 16px env(safe-area-inset-left); max-width:760px; margin:0 auto;}
    .card{background:var(--card);border:1px solid #1f2937;border-radius:16px;padding:14px}
    .top{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .title{font-weight:800;font-size:18px}
    .score{background:#0b1220;border:1px solid #1f2937;border-radius:999px;padding:6px 10px;font-weight:700}
    .word{font-size:36px;font-weight:900;text-align:center}
    .hint{font-size:13px;color:var(--muted);text-align:center;margin-top:2px}
    .options{display:grid;grid-template-columns:1fr;gap:10px;margin-top:12px}
    @media(min-width:560px){.options{grid-template-columns:1fr 1fr}}
    button.option{all:unset;cursor:pointer;padding:14px 14px;border:1px solid #1f2937;border-radius:12px;background:#0b1220}
    button.option.correct{border-color:var(--primary);background:#052e17}
    button.option.wrong{border-color:var(--danger);background:#2a0a0a}
    .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-top:10px}
    .btn{all:unset;cursor:pointer;padding:9px 12px;border:1px solid #1f2937;border-radius:10px;background:#0b1220}
    .pill{padding:6px 8px;border-radius:999px;background:#0b1220;border:1px solid #1f2937}
    .progress{height:6px;background:#0b1220;border:1px solid #1f2937;border-radius:999px;overflow:hidden;margin-top:8px}
    .bar{height:100%;width:0;background:linear-gradient(90deg,var(--accent),#22d3ee,#22c55e)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="top">
        <div class="title">ìœ ì•„ ì˜ì–´ í€´ì¦ˆ</div>
        <div class="score" id="scoreBox">0 / 0</div>
      </div>
      <div class="word" id="word">loadingâ€¦</div>
      <div class="hint" id="hint"></div>
      <div class="options" id="options"></div>
      <div class="controls">
        <button class="btn" id="nextBtn" title="ë‹¤ìŒ ë¬¸ì œ">ë‹¤ìŒ â–¶</button>
        <button class="btn" id="hearBtn" title="ë“£ê¸°">ğŸ”Š</button>
        <label class="pill"><input type="checkbox" id="readKorean"/> í•œê¸€ë„ ì½ê¸°</label>
        <label class="pill"><input type="checkbox" id="autoNext" checked/> ìë™ ë‹¤ìŒ</label>
        <select class="pill" id="voiceEn"></select>
        <select class="pill" id="voiceKo"></select>
      </div>
      <div class="progress"><div class="bar" id="bar"></div></div>
    </div>
  </div>

<script>
const WORDS = [{en:"apple", ko:"ì‚¬ê³¼", hint:"fruit"},{en:"banana", ko:"ë°”ë‚˜ë‚˜", hint:"fruit"},{en:"cat", ko:"ê³ ì–‘ì´", hint:"animal"},{en:"dog", ko:"ê°œ", hint:"animal"},{en:"bird", ko:"ìƒˆ", hint:"animal"},{en:"fish", ko:"ë¬¼ê³ ê¸°", hint:"animal"},{en:"cow", ko:"ì†Œ", hint:"farm"},{en:"pig", ko:"ë¼ì§€", hint:"farm"},{en:"horse", ko:"ë§", hint:"farm"},{en:"rabbit", ko:"í† ë¼", hint:"animal"},{en:"lion", ko:"ì‚¬ì", hint:"zoo"},{en:"tiger", ko:"í˜¸ë‘ì´", hint:"zoo"},{en:"bear", ko:"ê³°", hint:"zoo"},{en:"monkey", ko:"ì›ìˆ­ì´", hint:"zoo"},{en:"elephant", ko:"ì½”ë¼ë¦¬", hint:"zoo"},{en:"giraffe", ko:"ê¸°ë¦°", hint:"zoo"},{en:"zebra", ko:"ì–¼ë£©ë§", hint:"zoo"},{en:"chicken", ko:"ë‹­", hint:"farm"},{en:"duck", ko:"ì˜¤ë¦¬", hint:"animal"},{en:"frog", ko:"ê°œêµ¬ë¦¬", hint:"animal"},{en:"sun", ko:"íƒœì–‘", hint:"sky"},{en:"moon", ko:"ë‹¬", hint:"sky"},{en:"star", ko:"ë³„", hint:"sky"},{en:"sky", ko:"í•˜ëŠ˜", hint:"sky"},{en:"cloud", ko:"êµ¬ë¦„", hint:"weather"},{en:"rain", ko:"ë¹„", hint:"weather"},{en:"snow", ko:"ëˆˆ", hint:"weather"},{en:"water", ko:"ë¬¼", hint:"drink"},{en:"fire", ko:"ë¶ˆ", hint:"hot"},{en:"tree", ko:"ë‚˜ë¬´", hint:"nature"},{en:"flower", ko:"ê½ƒ", hint:"nature"},{en:"grass", ko:"í’€", hint:"nature"},{en:"leaf", ko:"ì", hint:"nature"},{en:"car", ko:"ìë™ì°¨", hint:"vehicle"},{en:"bus", ko:"ë²„ìŠ¤", hint:"vehicle"},{en:"train", ko:"ê¸°ì°¨", hint:"vehicle"},{en:"plane", ko:"ë¹„í–‰ê¸°", hint:"vehicle"},{en:"boat", ko:"ë°°", hint:"vehicle"},{en:"house", ko:"ì§‘", hint:"home"},{en:"door", ko:"ë¬¸", hint:"home"},{en:"window", ko:"ì°½ë¬¸", hint:"home"},{en:"bed", ko:"ì¹¨ëŒ€", hint:"home"},{en:"chair", ko:"ì˜ì", hint:"home"},{en:"table", ko:"íƒì", hint:"home"},{en:"book", ko:"ì±…", hint:"study"},{en:"pencil", ko:"ì—°í•„", hint:"study"},{en:"pen", ko:"íœ", hint:"study"},{en:"bag", ko:"ê°€ë°©", hint:"school"},{en:"shoes", ko:"ì‹ ë°œ", hint:"wear"},{en:"hat", ko:"ëª¨ì", hint:"wear"},{en:"shirt", ko:"ì…”ì¸ ", hint:"wear"},{en:"pants", ko:"ë°”ì§€", hint:"wear"},{en:"milk", ko:"ìš°ìœ ", hint:"drink"},{en:"juice", ko:"ì£¼ìŠ¤", hint:"drink"},{en:"bread", ko:"ë¹µ", hint:"food"},{en:"rice", ko:"ë°¥", hint:"food"},{en:"egg", ko:"ê³„ë€", hint:"food"},{en:"cake", ko:"ì¼€ì´í¬", hint:"food"},{en:"candy", ko:"ì‚¬íƒ•", hint:"food"},{en:"mom", ko:"ì—„ë§ˆ", hint:"family"},{en:"dad", ko:"ì•„ë¹ ", hint:"family"},{en:"baby", ko:"ì•„ê¸°", hint:"family"},{en:"friend", ko:"ì¹œêµ¬", hint:"people"},{en:"hello", ko:"ì•ˆë…•", hint:"greeting"},{en:"bye", ko:"ì˜ ê°€", hint:"greeting"},{en:"thank you", ko:"ê³ ë§ˆì›Œ", hint:"phrase"},{en:"please", ko:"ë¶€íƒí•´", hint:"phrase"},{en:"yes", ko:"ë„¤", hint:"answer"},{en:"no", ko:"ì•„ë‹ˆì˜¤", hint:"answer"}];

const $ = (sel)=>document.querySelector(sel);
const $$ = (sel)=>Array.from(document.querySelectorAll(sel));
const rand = (n)=>Math.floor(Math.random()*n);
function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.random()*(i+1)|0; [arr[i],arr[j]]=[arr[j],arr[i]] } return arr }

let current = null;
let answered = false;
let correctCount = 0, totalCount = 0;

let voices = [];
function loadVoices(){
  voices = speechSynthesis.getVoices();
  const enSel = $('#voiceEn');
  const koSel = $('#voiceKo');
  enSel.innerHTML=''; koSel.innerHTML='';
  voices.filter(v=>/en/i.test(v.lang)).forEach(v=>{
    const opt=document.createElement('option'); opt.value=v.name; opt.textContent=`EN â€¢ ${v.name} (${v.lang})`; enSel.appendChild(opt);
  });
  voices.filter(v=>/(ko|Korean)/i.test(v.lang+v.name)).forEach(v=>{
    const opt=document.createElement('option'); opt.value=v.name; opt.textContent=`KO â€¢ ${v.name} (${v.lang})`; koSel.appendChild(opt);
  });
}
if('speechSynthesis' in window){
  loadVoices();
  window.speechSynthesis.onvoiceschanged = loadVoices;
}

function speak(text, lang='en', which='en'){
  if(!('speechSynthesis' in window)) return;
  window.speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text);
  let sel = which==='en' ? $('#voiceEn') : $('#voiceKo');
  const chosen = voices.find(v=>v.name===sel.value);
  if(chosen) u.voice = chosen;
  u.lang = chosen?.lang || (which==='en' ? 'en-US' : 'ko-KR');
  u.rate = 0.95; u.pitch = 1.0; u.volume = 1.0;
  window.speechSynthesis.speak(u);
}

function makeQuestion(){
  answered = false;
  const word = WORDS[rand(WORDS.length)];
  const wrongs = shuffle(WORDS.filter(w=>w.ko!==word.ko)).slice(0,3).map(w=>w.ko);
  const choices = shuffle([word.ko, ...wrongs]);
  current = {word, choices};
  $('#word').textContent = word.en;
  $('#hint').textContent = word.hint ? `íŒíŠ¸: ${word.hint}` : '';
  const optWrap = $('#options');
  optWrap.innerHTML='';
  choices.forEach((txt)=>{
    const b=document.createElement('button');
    b.className='option'; b.textContent=txt;
    b.addEventListener('click',()=>handleAnswer(b, txt===word.ko));
    optWrap.appendChild(b);
  });
  const pct = totalCount===0 ? 0 : Math.min(100, Math.round((correctCount/totalCount)*100));
  $('#bar').style.width = pct + '%';
}

function handleAnswer(btn,isCorrect){
  if(answered) return; answered = true; totalCount++;
  $$('.option').forEach(b=>b.disabled=true);
  btn.classList.add(isCorrect? 'correct':'wrong');
  const correctBtn = $$('.option').find(b=>b.textContent===current.word.ko);
  correctBtn.classList.add('correct');
  if(isCorrect) correctCount++;
  updateScore();
  speak(current.word.en,'en','en');
  if($('#readKorean').checked){
    setTimeout(()=>speak(current.word.ko,'ko','ko'), 700);
  }
  if($('#autoNext').checked){
    setTimeout(()=>{ makeQuestion(); }, 3400);
  }
}

function updateScore(){
  $('#scoreBox').textContent = `${correctCount} / ${totalCount}`;
  const pct = totalCount===0 ? 0 : Math.min(100, Math.round((correctCount/totalCount)*100));
  $('#bar').style.width = pct + '%';
}

$('#nextBtn').addEventListener('click',()=>makeQuestion());
$('#hearBtn').addEventListener('click',()=>{ if(current) speak(current.word.en,'en','en'); });

(function init(){
  document.getElementById('autoNext').checked = true;
  updateScore();
  makeQuestion();
})();
</script>
</body>
</html>
