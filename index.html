<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ìœ ì•„ìš© ì˜ì–´ ê¸°ì´ˆë‹¨ì–´ í€´ì¦ˆ</title>
  <style>
    :root{
      --bg:#0f172a; --card:#111827cc; --text:#e5e7eb; --muted:#94a3b8; --primary:#22c55e; --danger:#ef4444; --accent:#38bdf8;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0b1220,#111827);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Apple SD Gothic Neo,Noto Sans KR,sans-serif;}
    .container{max-width:960px;margin:0 auto;padding:20px}
    header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:16px}
    .title{font-weight:800;letter-spacing:.3px}
    .title .sub{display:block;font-size:13px;color:var(--muted);font-weight:500}
    .card{background:var(--card);backdrop-filter:blur(8px);border:1px solid #1f2937;border-radius:20px;padding:18px}
    .row{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:760px){.row{grid-template-columns:2fr 1fr}}
    .word{font-size:40px;font-weight:900;letter-spacing:.5px;text-align:center}
    .hint{font-size:14px;color:var(--muted);text-align:center;margin-top:4px}
    .options{display:grid;grid-template-columns:1fr;gap:12px;margin-top:16px}
    @media(min-width:560px){.options{grid-template-columns:1fr 1fr}}
    button.option{all:unset;cursor:pointer;padding:14px 16px;border:1px solid #1f2937;border-radius:14px;background:#0b1220;transition:transform .08s ease, background .2s ease, border-color .2s}
    button.option:hover{transform:translateY(-1px);border-color:#334155}
    button.option.correct{border-color:var(--primary);background:#052e17}
    button.option.wrong{border-color:var(--danger);background:#2a0a0a}
    .controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .controls button,.controls select,.controls label{font-size:14px}
    .btn{all:unset;cursor:pointer;padding:10px 14px;border:1px solid #1f2937;border-radius:12px;background:#0b1220}
    .btn:hover{border-color:#334155}
    .pill{padding:8px 10px;border-radius:999px;background:#0b1220;border:1px solid #1f2937}
    .score{font-weight:700}
    .progress{height:8px;background:#0b1220;border:1px solid #1f2937;border-radius:999px;overflow:hidden}
    .bar{height:100%;width:0;background:linear-gradient(90deg,var(--accent),#22d3ee,#22c55e)}
    .small{font-size:12px;color:var(--muted)}
    .kbd{padding:2px 6px;border:1px solid #334155;border-bottom-width:3px;border-radius:6px;background:#0b1220;font-family:ui-monospace,monospace}
    footer{margin-top:18px;color:var(--muted);font-size:12px;text-align:center}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="title">
        <div style="font-size:22px">ìœ ì•„ìš© ì˜ì–´ ê¸°ì´ˆë‹¨ì–´ í€´ì¦ˆ</div>
        <span class="sub">ìœ„ì— ë³´ì´ëŠ” <strong>ì˜ì–´ ë‹¨ì–´</strong>ë¥¼ ë³´ê³  ì•„ë˜ <strong>í•œê¸€ ëœ»</strong>ì„ ê³ ë¥´ì„¸ìš”. ì •ë‹µ ì‹œ TTSê°€ ì½ì–´ì¤˜ìš”.</span>
      </div>
      <div class="pill score" id="scoreBox">0 / 0</div>
    </header>

    <div class="row">
      <section class="card">
        <div class="word" id="word">loadingâ€¦</div>
        <div class="hint" id="hint"></div>
        <div class="options" id="options"></div>
        <div class="controls" style="margin-top:14px">
          <button class="btn" id="nextBtn" title="ë‹¤ìŒ ë¬¸ì œ (N)">ë‹¤ìŒ ë¬¸ì œ â–¶</button>
          <button class="btn" id="hearBtn" title="ì˜ì–´ ë‹¨ì–´ ë“£ê¸° (H)">ë‹¨ì–´ ë“£ê¸° ğŸ”Š</button>
          <label class="pill"><input type="checkbox" id="readKorean"/> ì •ë‹µ í›„ í•œê¸€ë„ ì½ê¸°</label>
          <label class="pill"><input type="checkbox" id="autoNext" checked/> ì •ë‹µ í›„ ìë™ ë‹¤ìŒ</label>
          <select class="pill" id="voiceEn"></select>
          <select class="pill" id="voiceKo"></select>
        </div>
        <div class="progress" style="margin-top:10px"><div class="bar" id="bar"></div></div>
      </section>

      <aside class="card">
        <div style="font-weight:700;margin-bottom:8px">ì„¤ì • & ë„ì›€ë§</div>
        <div class="small" style="line-height:1.7">
          â€¢ <span class="kbd">N</span> : ë‹¤ìŒ ë¬¸ì œ, <span class="kbd">H</span> : ë‹¨ì–´ ë“£ê¸°<br/>
          â€¢ ë³´ê¸° í´ë¦­ í›„ ì •ë‹µì´ <span style="color:var(--primary)">ì´ˆë¡</span>ìœ¼ë¡œ í‘œì‹œë¼ìš”.<br/>
          â€¢ "ì •ë‹µ í›„ í•œê¸€ë„ ì½ê¸°"ë¥¼ ì¼œë©´ ì˜ì–´â†’í•œê¸€ ìˆœì„œë¡œ ì½ìŠµë‹ˆë‹¤.<br/>
          â€¢ "ìë™ ë‹¤ìŒ"ì„ ì¼œë©´ ì •ë‹µ TTS ë’¤ ìë™ìœ¼ë¡œ ë‹¤ìŒ ë¬¸ì œê°€ ë‚˜ì˜µë‹ˆë‹¤.(ëŒ€ê¸° ì•½ 3.4ì´ˆ)<br/>
          â€¢ ìš°ì¸¡ ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ì˜ì–´/í•œêµ­ì–´ ìŒì„±ì„ ì„ íƒí•  ìˆ˜ ìˆì–´ìš”.<br/>
        </div>
        <hr style="border-color:#1f2937;margin:12px 0"/>
        <div class="small">ë‹¨ì–´ ì¶”ê°€/ìˆ˜ì •ì€ ì•„ë˜ ì½”ë“œì˜ <strong>WORDS</strong> ë°°ì—´ì„ í¸ì§‘í•˜ë©´ ë©ë‹ˆë‹¤.</div>
      </aside>
    </div>

    <footer>Â© 2025 Basic English Quiz â€¢ Web Speech API (TTS) ì‚¬ìš©</footer>
  </div>

<script>
const WORDS = [{en:"apple", ko:"ì‚¬ê³¼", hint:"fruit"},{en:"banana", ko:"ë°”ë‚˜ë‚˜", hint:"fruit"},{en:"cat", ko:"ê³ ì–‘ì´", hint:"animal"},{en:"dog", ko:"ê°œ", hint:"animal"},{en:"bird", ko:"ìƒˆ", hint:"animal"},{en:"fish", ko:"ë¬¼ê³ ê¸°", hint:"animal"},{en:"cow", ko:"ì†Œ", hint:"farm"},{en:"pig", ko:"ë¼ì§€", hint:"farm"},{en:"horse", ko:"ë§", hint:"farm"},{en:"rabbit", ko:"í† ë¼", hint:"animal"},{en:"lion", ko:"ì‚¬ì", hint:"zoo"},{en:"tiger", ko:"í˜¸ë‘ì´", hint:"zoo"},{en:"bear", ko:"ê³°", hint:"zoo"},{en:"monkey", ko:"ì›ìˆ­ì´", hint:"zoo"},{en:"elephant", ko:"ì½”ë¼ë¦¬", hint:"zoo"},{en:"giraffe", ko:"ê¸°ë¦°", hint:"zoo"},{en:"zebra", ko:"ì–¼ë£©ë§", hint:"zoo"},{en:"chicken", ko:"ë‹­", hint:"farm"},{en:"duck", ko:"ì˜¤ë¦¬", hint:"animal"},{en:"frog", ko:"ê°œêµ¬ë¦¬", hint:"animal"},{en:"sun", ko:"íƒœì–‘", hint:"sky"},{en:"moon", ko:"ë‹¬", hint:"sky"},{en:"star", ko:"ë³„", hint:"sky"},{en:"sky", ko:"í•˜ëŠ˜", hint:"sky"},{en:"cloud", ko:"êµ¬ë¦„", hint:"weather"},{en:"rain", ko:"ë¹„", hint:"weather"},{en:"snow", ko:"ëˆˆ", hint:"weather"},{en:"water", ko:"ë¬¼", hint:"drink"},{en:"fire", ko:"ë¶ˆ", hint:"hot"},{en:"tree", ko:"ë‚˜ë¬´", hint:"nature"},{en:"flower", ko:"ê½ƒ", hint:"nature"},{en:"grass", ko:"í’€", hint:"nature"},{en:"leaf", ko:"ì", hint:"nature"},{en:"car", ko:"ìë™ì°¨", hint:"vehicle"},{en:"bus", ko:"ë²„ìŠ¤", hint:"vehicle"},{en:"train", ko:"ê¸°ì°¨", hint:"vehicle"},{en:"plane", ko:"ë¹„í–‰ê¸°", hint:"vehicle"},{en:"boat", ko:"ë°°", hint:"vehicle"},{en:"house", ko:"ì§‘", hint:"home"},{en:"door", ko:"ë¬¸", hint:"home"},{en:"window", ko:"ì°½ë¬¸", hint:"home"},{en:"bed", ko:"ì¹¨ëŒ€", hint:"home"},{en:"chair", ko:"ì˜ì", hint:"home"},{en:"table", ko:"íƒì", hint:"home"},{en:"book", ko:"ì±…", hint:"study"},{en:"pencil", ko:"ì—°í•„", hint:"study"},{en:"pen", ko:"íœ", hint:"study"},{en:"bag", ko:"ê°€ë°©", hint:"school"},{en:"shoes", ko:"ì‹ ë°œ", hint:"wear"},{en:"hat", ko:"ëª¨ì", hint:"wear"},{en:"shirt", ko:"ì…”ì¸ ", hint:"wear"},{en:"pants", ko:"ë°”ì§€", hint:"wear"},{en:"milk", ko:"ìš°ìœ ", hint:"drink"},{en:"juice", ko:"ì£¼ìŠ¤", hint:"drink"},{en:"bread", ko:"ë¹µ", hint:"food"},{en:"rice", ko:"ë°¥", hint:"food"},{en:"egg", ko:"ê³„ë€", hint:"food"},{en:"cake", ko:"ì¼€ì´í¬", hint:"food"},{en:"candy", ko:"ì‚¬íƒ•", hint:"food"},{en:"mom", ko:"ì—„ë§ˆ", hint:"family"},{en:"dad", ko:"ì•„ë¹ ", hint:"family"},{en:"baby", ko:"ì•„ê¸°", hint:"family"},{en:"friend", ko:"ì¹œêµ¬", hint:"people"},{en:"hello", ko:"ì•ˆë…•", hint:"greeting"},{en:"bye", ko:"ì˜ ê°€", hint:"greeting"},{en:"thank you", ko:"ê³ ë§ˆì›Œ", hint:"phrase"},{en:"please", ko:"ë¶€íƒí•´", hint:"phrase"},{en:"yes", ko:"ë„¤", hint:"answer"},{en:"no", ko:"ì•„ë‹ˆì˜¤", hint:"answer"}];

const $ = (sel)=>document.querySelector(sel);
const $$ = (sel)=>Array.from(document.querySelectorAll(sel));
const rand = (n)=>Math.floor(Math.random()*n);
function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]] } return arr }

let current = null;
let answered = false;
let correctCount = 0, totalCount = 0;

let voices = [];
function loadVoices(){
  voices = speechSynthesis.getVoices();
  const enSel = $('#voiceEn');
  const koSel = $('#voiceKo');
  enSel.innerHTML=''; koSel.innerHTML='';
  voices.filter(v=>/en/i.test(v.lang)).forEach(v=>{
    const opt=document.createElement('option'); opt.value=v.name; opt.textContent=`EN â€¢ ${v.name} (${v.lang})`; enSel.appendChild(opt);
  });
  voices.filter(v=>/(ko|Korean)/i.test(v.lang+v.name)).forEach(v=>{
    const opt=document.createElement('option'); opt.value=v.name; opt.textContent=`KO â€¢ ${v.name} (${v.lang})`; koSel.appendChild(opt);
  });
  const saved = JSON.parse(localStorage.getItem('quizSettings')||'{}');
  if(saved.voiceEn && [...enSel.options].some(o=>o.value===saved.voiceEn)) enSel.value=saved.voiceEn;
  if(saved.voiceKo && [...koSel.options].some(o=>o.value===saved.voiceKo)) koSel.value=saved.voiceKo;
}
if('speechSynthesis' in window){
  loadVoices();
  window.speechSynthesis.onvoiceschanged = loadVoices;
}

function speak(text, lang='en', which='en'){
  if(!('speechSynthesis' in window)) return;
  window.speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text);
  let sel = which==='en' ? $('#voiceEn') : $('#voiceKo');
  const chosen = voices.find(v=>v.name===sel.value);
  if(chosen) u.voice = chosen;
  u.lang = chosen?.lang || (which==='en' ? 'en-US' : 'ko-KR');
  u.rate = 0.95; u.pitch = 1.0; u.volume = 1.0;
  window.speechSynthesis.speak(u);
}

function makeQuestion(){
  answered = false;
  const word = WORDS[rand(WORDS.length)];
  const wrongs = shuffle(WORDS.filter(w=>w.ko!==word.ko)).slice(0,3).map(w=>w.ko);
  const choices = shuffle([word.ko, ...wrongs]);
  current = {word, choices};
  $('#word').textContent = word.en;
  $('#hint').textContent = word.hint ? `íŒíŠ¸: ${word.hint}` : '';
  const optWrap = $('#options');
  optWrap.innerHTML='';
  choices.forEach((txt)=>{
    const b=document.createElement('button');
    b.className='option'; b.textContent=txt;
    b.addEventListener('click',()=>handleAnswer(b, txt===word.ko));
    optWrap.appendChild(b);
  });
  const pct = totalCount===0 ? 0 : Math.min(100, Math.round((correctCount/totalCount)*100));
  $('#bar').style.width = pct + '%';
}

function handleAnswer(btn,isCorrect){
  if(answered) return; answered = true; totalCount++;
  $$('.option').forEach(b=>b.disabled=true);
  btn.classList.add(isCorrect? 'correct':'wrong');
  const correctBtn = $$('.option').find(b=>b.textContent===current.word.ko);
  correctBtn.classList.add('correct');
  if(isCorrect) correctCount++;
  updateScore();
  speak(current.word.en,'en','en');
  if($('#readKorean').checked){
    setTimeout(()=>speak(current.word.ko,'ko','ko'), 700);
  }
  if($('#autoNext').checked){
    setTimeout(()=>{ makeQuestion(); }, 3400);
  }
}

function updateScore(){
  $('#scoreBox').textContent = `${correctCount} / ${totalCount}`;
  const pct = totalCount===0 ? 0 : Math.min(100, Math.round((correctCount/totalCount)*100));
  $('#bar').style.width = pct + '%';
}

$('#nextBtn').addEventListener('click',()=>makeQuestion());
$('#hearBtn').addEventListener('click',()=>{ if(current) speak(current.word.en,'en','en'); });

window.addEventListener('keydown',(e)=>{
  if(e.key==='n' || e.key==='N') { e.preventDefault(); makeQuestion(); }
  if(e.key==='h' || e.key==='H') { e.preventDefault(); if(current) speak(current.word.en,'en','en'); }
});

['voiceEn','voiceKo','readKorean','autoNext'].forEach(id=>{
  document.getElementById(id).addEventListener('change',()=>{
    const data={
      voiceEn: $('#voiceEn').value,
      voiceKo: $('#voiceKo').value,
      readKorean: $('#readKorean').checked,
      autoNext: $('#autoNext').checked,
    };
    localStorage.setItem('quizSettings', JSON.stringify(data));
  });
});

(function init(){
  const saved = JSON.parse(localStorage.getItem('quizSettings')||'{}');
  document.getElementById('autoNext').checked = (saved.autoNext === undefined) ? true : !!saved.autoNext;
  document.getElementById('readKorean').checked = !!saved.readKorean;
  updateScore();
  makeQuestion();
})();
</script>
</body>
</html>
